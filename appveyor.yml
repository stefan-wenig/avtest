version: 1.0.{build}
image: Visual Studio 2017

before_build:
 - dotnet restore

build_script:
 - dotnet build /verbosity:quiet "avtest.sln"

artifacts:
- path: npgsql.nupkg
  name: npgsql

notifications:
- provider: Webhook
  url: https://app.signpath.io/API/v1/50c064a2-8258-4d03-b9a8-43498f58c6a1/Integrations/AppVeyor
  on_build_success: true
  on_build_failure: false
  on_build_status_changed: false
  method: POST
  headers:
    Authorization:
      secure: Wi3uxGbWh/vK7CrpXbPX2WAU5U4eirNBWICQ54sEZ8Igqg1W9oyuNLltG0nYxXKu7U6BlG+4Yi/JSQ+lvFQLgA==
  body: >-
    {
        "AccountName": "stefan-wenig",
        "ProjectSlug": "{{projectName}}",
        "BuildVersion": "{{buildVersion}}",
        "SigningPolicyId": "d6ff3900-6fa8-4751-a153-c76963934547"
    }
